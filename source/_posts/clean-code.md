---
title: 代码整洁之道
date: 2014-08-20 20:54:30
tags: 随笔
---

这是一本关于如何写好代码，如何当好一名优秀的程序员的书籍。在本书中，作者引用IT牛人的话，阐述了什么是简洁的代码，然后提出了自己的看法。正如作者一直强调的，光看书是远远不够的，要勤于练习，不断改正，才能有所收获。下面就让我们来一探究竟。

# 整洁的代码
在这章里面，作者探讨了整洁的代码的重要性，以及何为简洁的代码。
# 有意义的命名
>名副其实，而且一旦发现有更好的名字，立即换掉旧的。
避免误导
有意义的区分,Variable一词永远不应当出现在变量名中，table一词也不应当出现在表名中。
使用读得出来的名称
使用可搜索的名称
避免使用编码
类名：类名和对象名应该是名词或者名词短语，而不应该是动词。
方法名：方法名应当是动词或者动词短语。    
每个概念对应一个词，不要使用双关语。
不要添加没用的语境：不要添加重复相同的前缀。只要短名称足够清除，就要比长名称好。对于Address类的实体来说，accountAddress和customerAddress都是不错的对象名称，但是用在类名上就不好了。Address是个好类名，如果需要与MAC地址，端口地址，WEB地址做区别，我会考虑使用PostalAddress、MAC和URI。这样的名称更为精确，而精确正是命名的要点。

<!-- more -->
# 函数 
通过函数名，可以读出来它是干什么的
短小，只做一件事情，每个函数一个抽象层次：如果函数只是做了该函数名下同一抽象层上的步骤，则函数还是只是做了一件事。编写函数，毕竟是为了把大一些的概念（换言之，函数的名称）拆分成另一抽象层级的一系列处理步骤。
避免重复。
如何写出好的函数：刚开始写函数时，有太多的缩进和嵌套循环，有过长的参数列表，名称是随意取的，也会有重复的代码。不过会配上一套测试单元，覆盖每行丑陋的代码。然后再打磨这些代码，分解函数，修改名称，消除重复，缩短和重新安置方法。有时，还拆散类，保持测试通过。
# 注释
少用注释，有些日志注释交给版本管理工具

# 代码格式
变量声明，应尽可能的靠近其使用位置。
实体变量应该在类的顶部声明。
相关函数，应该放在一起。
探索了各种缩进和空格的使用。最重要的是良好的书写代码的习惯和风格，并且保持一致。记住，代码被阅读的时间远远超过写的时间。所以，写好每一段代码。就像讲好每一个故事一样。

# 对象和数据结构
对象把数据隐藏于抽象之后，暴露操作数据的函数。数据结构暴露其数据，没有提供有意义的函数。过程式代码（使用数据结构的代码）便于在不改动既有数据结构的前提下添加新的函数，而面向对象代码便于在不改动既有函数的前提下添加新类。反过来讲也说得通，过程式代码难以添加新数据结构，因为必须修改所有函数，面向对象的代码难以修改函数，因为必须修改所有类。
# 错误处理
将错误处理隔离看待，独立于主要的程序逻辑，就能写出强固而简洁的代码。
# 边界
# 单元测试
# 类
类应当短小：应该能够用大概25个单词描述一个类，而且不能用“if”,"and","or","but"等词汇。
单一职权原则：只有一个修改的理由
内聚：类应该只有少量的实体变量。类中的每个方法都应该操作一个或者多个这种变量。

# 系统：将构造与使用分开的方法之一就是将全部构造过程搬迁至Main模块中，设计系统的其余部分是，假设所有的对象都已正确构造和设置。
工厂
控制反转
AOP   
# 迭进    
软件项目的主要成本在于长期维护。
# 并发编程
对象是过程的抽象，线程是调度的抽象。
第一要诀还是遵守单一权责原则，了解并发问题的可能原因，学习类库，了解基本算法，学习如何找到必须锁定的区域并锁定之。
# 逐步改进
对一个命令行参数解析程序的案例研究
要编写整洁的代码，必须先写肮脏代码，然后再清理它。

# Junit内幕
# 重构SerialDate
# 味道与启发



